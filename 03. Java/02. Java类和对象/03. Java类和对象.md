# Java类和对象
面向对象编程是一种编程范式，它将程序中的数据和操作数据的方法（函数）放在一起，形成“对象”，从而封装了数据和函数，提高了程序的可读性、可维护性和可扩展性。
## 概念

* 抽象（Abstraction）：抽象是将对象的共同特征抽象出来，形成类的属性和方法，以及接口等规范。抽象可以将复杂的现实问题简化成易于理解和实现的模型，同时也可以提高代码的可读性和可维护性。

* **类**（Class）：类是一种**模板**，用来描述具有相同属性和行为的对象的共同特征。Java中通过class关键字定义类。
    * **方法**：方法就是行为，一个类可以有很多方法。逻辑运算、数据修改以及所有动作都是在方法中完成的。
    * **实例**：将类看作是模板或者蓝图，而实例则是该模板的具体实现、一个存在的实体。每个实例都是独立的，互相之间没有影响。
* **对象**（Object）：对象是类的一个实例，具有该类所描述的特征和行为。Java中通过new关键字创建对象。对象是一个具体的概念，有时可以和实例通用。
    * 实例变量：也成为成员变量或属性。每个对象都有独特的实例变量，对象的状态由这些实例变量的值决定。

* **继承**（Inheritance）：继承是一种面向对象编程的基本特征，它允许一个类继承另一个类的属性和方法。子类可以使用父类的属性和方法，也可以重写父类的方法。Java中通过extends关键字实现继承。

* **多态**（Polymorphism）：多态是指同一个方法可以在不同的对象中具有不同的实现方式，实现多种不同的功能。Java中通过重载（Overloading）和重写（Overriding）实现多态。
    * **重载**（Overload）是编译时的多态，因为根据调用传参的类型、数量便可决定调用的是哪个重载方法，因此并不需要推迟到运行时去决定调用哪个方法，所以它是编译期就能决定的。
    * **重写**（Override，又称覆盖）是运行时的多态，我们都知道重写的前提是类继承，重写的方法的名称、参数必须跟被重写的方法一致（异常列表、返回结果及访问修饰符等限制这里不赘述），因此无法通过方法参数决定调用的是哪个子类或是父类的方法。只能在运行时通过传入的对象来动态决定。

* **封装**（Encapsulation）：封装是指将类的数据和方法进行包装，对外部世界隐藏实现细节，提供一组简单的接口来访问类的功能。Java中通过访问修饰符（public、private、protected）来实现封装。

```java
public class Test {
    public static void main(String[] args) {
        Human h=new Human();
        Human h1=h;
        h.name="张三";
        System.out.println(h1.name);
        System.out.println(h1==h);
    }
}

```

:::col example
本地组织出游活动以家庭为单位，一个家庭包含一父一母多孩。

旅行团包含两个家庭。

```java
//human
public class Human {
    String name;
    int age;
    char sex;
}

//family
import java.util.ArrayList;
public class Family {
    Human father;
    Human mother;
    ArrayList<Human> children=new ArrayList<>();

}

//party
import java.util.ArrayList;
public class Family {
    ArrayList<family> pt=new ArrayList<>();
```
:::

## 包 (*package*)
**包**：用于管理和组织类（class）的一种机制。
* 逻辑上代表一种分类，相关类被组织在一起方便开发和维护。
* 物理上是一个文件夹，方便管理和查找。
* 通过关键字`package`来定义，每个Java源文件的第一条语句都应该是一个包定义语句。


一个Java程序可以包含一个或多个package，每个package中可以包含多个类，一个类也可以不属于任何一个package。

### 包的作用

1.  **命名空间**：包可以用来创建命名空间，防止不同的类名之间的冲突，以及和其他库的类名之间的冲突。
    
2.  **访问控制**：包可以用来控制类的访问权限。类可以被定义为public、private、protected或者默认访问权限，这取决于它们所在的包和类定义的访问修饰符。
    
3.  **代码组织**：包可以用来组织类。通过将相关的类组织在一起，可以使代码更容易理解和维护。
    

Java标准类库中的类也都是组织在不同的包中，例如`java.util`包中包含了一些常用的工具类，`java.lang`包中包含了一些Java语言的核心类。当我们使用这些类时，需要通过`import`关键字将相应的包导入到我们的程序中。

### 常用包
Java提供了众多的常用包来支持各种功能，这些常用包包括：

1.  `java.lang`：提供了Java语言的基础类，如基本类型包装类、字符串、数学运算类、异常类、线程类等。
2.  `java.util`：提供了一系列实用的工具类，如集合类、日期类、时间类、随机数类、正则表达式类等。
3.  `java.io`：提供了对文件、流、网络等输入输出操作的支持。
4.  `java.net`：提供了对网络协议的支持，如TCP、UDP、HTTP等。
5.  `java.sql`：提供了对数据库的支持，包括连接、查询、更新等操作。
6.  `java.awt`：提供了抽象窗口工具集，包括窗口、按钮、菜单、文本框、图形等组件。
7.  `javax.swing`：提供了基于AWT的更加丰富的图形界面组件，如滑动条、进度条、表格等。
8.  `java.security`：提供了安全性相关的类，如加密、解密、数字签名等。
9.  `java.nio`：提供了非阻塞I/O的支持，可提高I/O操作的效率。
10.  `java.util.concurrent`：提供了多线程并发操作的支持，如锁、同步器、线程池等。

## Java类定义
一个类是一种模板，用于定义对象的属性和行为。Java类的基本构成包括以下几个部分：

* ==类名==：一个独特的标识符，用于表示类的名称。按照Java编码规范，类名应该以大写字母开头，采用驼峰命名法。

* ==属性==：用于描述对象的状态。属性通常对应类的实例变量，用于存储对象的数据。属性的定义包括访问修饰符、数据类型和属性名。

* ==方法==：用于定义对象的行为。方法是一组执行特定任务的代码块。方法的定义包括访问修饰符、返回类型、方法名、参数列表和方法体。

* ==构造方法==：用于初始化对象的特殊方法。构造方法的名称与类名相同，没有返回类型。构造方法可以有多个，参数列表的不同用于区分。

* 内部类：在一个类内部定义的类。内部类可以访问其外部类的成员，提供了更好的封装和组织代码的方式。

* 继承：一个类可以继承另一个类的属性和方法，以实现代码重用和扩展功能。在Java中，继承通过关键字extends实现。

* ==访问修饰符==：用于控制类及其成员的可见性。常见的访问修饰符有public、private、protected和默认（无修饰符，又称包私有）。

* 接口实现：一个类可以实现一个或多个接口，以定义类需要遵循的规范。在Java中，接口实现使用关键字implements。

### 类定义形式
```Java
[访问修饰符] class 类名 [extends 父类] [implements 接口列表] {
    // 属性,即成员变量
    [访问修饰符] 类型 变量名 [= 初始值];
    
    // 构造方法
    [访问修饰符] 类名([参数列表]) {
        // 构造方法的代码块
    }
    
    // 成员方法
    [访问修饰符] 返回类型 方法名([参数列表]) [throws 异常类型] {
        // 方法代码块
    }
}
```
其中，[] 表示可选项。

1. 访问修饰符用于控制类、成员变量和成员方法的访问权限。常用的访问修饰符包括 public、protected、private 和默认访问修饰符。

2. 类名指定了Java类的名称，必须符合标识符命名规则。

3. extends 关键字用于指定该类的父类，一个类只能继承一个父类。

4. implements 关键字用于指定该类实现的接口列表，一个类可以实现多个接口。

5. 成员变量用于存储对象的状态，可以是基本类型、引用类型或数组类型。

6. 构造方法用于初始化对象，可以在创建对象时调用。

7. 成员方法用于定义对象的行为和功能，可以是实例方法、类方法或抽象方法。

8. throws 关键字用于指定方法可能抛出的异常类型。

### 构造函数
构
* 概念：构造方法是一种特殊类型的方法，也被称为构造器（Constructor）。目的是为新创建的对象分配内存，并对对象的属性（实例变量）进行初始化。
当创建一个新的对象时，Java会自动调用该类的构造器来初始化新对象的数据成员。

* 特点：
1. 构造方法名称与类名相同，没有返回类型（包括void）。
2. 构造方法可以有参数，允许重载，即可以在同一个类中定义多个同名构造方法，但参数类型和数量必须不同。
3. 如果在类中没有显式定义任何构造方法，编译器会自动提供一个默认的无参构造方法。当类中显式定义了一个或多个构造方法时，编译器将不再提供默认的无参构造方法。
4. 子类的构造方法可以通过 `super` 关键字显式调用父类的构造方法。如果没有显式调用父类的构造方法，编译器会默认调用父类的无参构造方法（如果存在）。如果父类没有无参构造方法，子类必须显式调用父类的其他构造方法。
5. 构造方法可以使用访问修饰符（如public、protected、private或默认访问）控制其他类对其的访问权限。

## String 类
Java中的String是一个对象，它是一个不可变的字符序列，用于表示文本数据。在Java中，字符串是非常重要的数据类型，它经常用于表示文本、文件名、URL等。

Java中的String对象具有以下特点：

1.  不可变性：String对象一旦被创建，它的值就不能被修改。如果需要修改一个字符串，需要创建一个新的String对象。
    
2.  线程安全：由于String对象是不可变的，所以它在多线程环境中是线程安全的。
    
3.  具有一系列的操作方法：Java中的String对象提供了一系列的操作方法，如字符串的比较、替换、查找、分割等。
    
4.  可以通过"+"运算符进行字符串的连接：Java中的String对象可以通过"+"运算符进行字符串的连接，也可以使用StringBuilder或StringBuffer来进行字符串的拼接。
    
5.  存储在常量池中：Java中的字符串常量值被存储在常量池中，如果需要创建一个字符串常量，可以直接使用字符串字面量。
    

例如，下面的代码演示了Java中创建String对象的方式：

```java
String str1 = "Hello World";  // 使用字符串字面量创建String对象
String str2 = new String("Hello World");  // 使用构造函数创建String对象
String str3 = str1 + "!!";  // 使用"+"运算符进行字符串连接
```

在实际开发中，由于String对象的不可变性和线程安全性，它被广泛应用于Java程序中的各个方面，如字符串的拼接、字符串的格式化、字符串的替换等。

### 常用方法

Java中的String类提供了很多方法来操作字符串，以下是一些常用的方法：

1.  `length()`：返回字符串的长度。
    
2.  `charAt(int index)`：返回指定位置上的字符。
    
3.  `substring(int beginIndex, int endIndex)`：返回从beginIndex开始到endIndex-1位置的子串。
    
4.  `equals(Object obj)`：比较字符串是否相等，区分大小写。
    
5.  `equalsIgnoreCase(String anotherString)`：比较字符串是否相等，不区分大小写。
    
6.  `compareTo(String anotherString)`：按字典顺序比较两个字符串。
    
7.  toUpperCase()：将字符串转换为大写。
    
8.  toLowerCase()：将字符串转换为小写。
    
9.  trim()：去掉字符串两端的空格。
    
10.  startsWith(String prefix)：判断字符串是否以指定前缀开头。
    
11.  endsWith(String suffix)：判断字符串是否以指定后缀结尾。
    
12.  contains(CharSequence s)：判断字符串是否包含指定的字符序列。
    
13.  replace(char oldChar, char newChar)：将字符串中的某个字符替换为另一个字符。
    
14.  split(String regex)：按照指定的正则表达式分割字符串，并返回分割后的字符串数组。
    
15.  indexOf(int ch)：返回指定字符在字符串中第一次出现的位置。
    
16.  lastIndexOf(int ch)：返回指定字符在字符串中最后一次出现的位置。
    
17.  replaceAll(String regex, String replacement)：将字符串中所有匹配正则表达式的字符替换为指定字符串。
    

以上只是一些常用的String方法，实际上Java中的String类还提供了很多其他方法，如字符串的格式化、字符串的编码转换、字符串的匹配等。

### 字符串格式化输出

`String.format()`静态方法用于==格式化字符串==，可以根据指定的格式将一组变量值转换为字符串。由 **格式字符串** 和 **变量参数列表** 组成，格式字符串中包含转换符，用于指定变量的类型和转换格式。
* 参数：
    * format：一个格式化字符串，包含普通文本和特殊的格式化占位符。
    * args：用于替换格式化占位符的参数列表，它们的类型可以是任意类型。
* 返回值：
    * 一个新的字符串，其中的格式化占位符已经被传入的参数**替换**。


常用的格式符：

*   %s：字符串类型
*   %d：整数类型
*   %f：浮点数类型
*   %.2f：精确到百分位，.3精确到千分位，以此类推
*   %16.3f：精确到千分位，宽度为16
*   %c：字符类型
*   %o：输出八进制整数
*   %x：输出十六进制整数
*   %t：日期时间类型
*   %%：输出%字符

```java
String str = String.format("Hello, %s!", "world");
System.out.println(str); // 输出：Hello, world!

int num = 123;
String numStr = String.format("The number is %d", num);
System.out.println(numStr); // 输出：The number is 123

double pi = 3.141592653589793;
String piStr = String.format("PI is approximately %.2f", pi);
System.out.println(piStr); // 输出：PI is approximately 3.14

Date date = new Date();
String dateStr = String.format("Today is %tF", date);
System.out.println(dateStr); // 输出：Today is 2022-04-05
```

String.format()方法的返回值为格式化后的字符串。

---

格式化占位符的基本语法如下：

```java
%[argument_index$][flags][width][.precision]conversion
```
*   `argument_index$`：（可选）一个整数，用于指定参数列表中参数的位置。参数索引从1开始。
*   `flags`：（可选）一组字符，用于控制输出格式。例如，`+`用于显示正数的符号，`,`用于给数字添加分组分隔符等。
*   `width`：（可选）一个整数，用于指定输出的最小宽度。如果实际值的宽度小于此值，将使用空格进行填充。
*   `precision`：（可选）一个整数，用于指定浮点数的小数位数，或字符串的最大输出长度。
*   `conversion`：（必选）一个字符，用于指定参数的类型和输出格式。例如，`d`表示十进制整数，`f`表示浮点数，`s`表示字符串等。

示例：

```java
public class FormatExample {
    public static void main(String[] args) {
        int intValue = 42;
        double doubleValue = 3.14159;
        String stringValue = "Hello, world!";

        String formattedString = String.format("整数：%d，浮点数：%.2f，字符串：%s", intValue, doubleValue, stringValue);
        System.out.println(formattedString);
    }
}
```

输出：

```
整数：42，浮点数：3.14，字符串：Hello, world!
```