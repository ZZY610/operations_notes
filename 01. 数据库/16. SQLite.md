# 16. SQLite

## 概述

### 特点
- **简单性**：代码占用空间小，也无需复杂配置，一个文件即可使用。
- **嵌入式**：直接嵌入应用程序中，适用于小型项目和移动应用。
- **跨平台**：整个数据库存在一个单独的文件中。

### 应用场景

- 作为物联网数据库，例如手机、MP3、机顶盒等。
- 网站数据库，非常适合于小型项目。
- 应用程序文件格式。
    - 完全自定义格式
    - 文件堆格式
    - 封装文件堆格式。
## 安装
### windows安装sqlite

1. **从 SQLite 官网下载二进制文件：**
   - 访问 SQLite 官网：[https://www.sqlite.org/download.html](https://www.sqlite.org/download.html)
   - 在 "Precompiled Binaries for Windows" 部分，找到32-bit 或 64-bit的下载链接。包括sql-dill和sql-tools，解压后放进同一个文件夹内。

2. **设置环境变量**
   - 将 SQLite 的可执行文件路径添加到系统的 PATH 环境变量中。
   - 在cmd中运行 `sqlite3` 命令。

### Linux安装sqlite
- 对于大多数 Linux 发行版，可以使用包管理器直接安装 SQLite。
    - 例如，在 Ubuntu 上可以运行：
        ```bash
        sudo apt-get update
        sudo apt-get install sqlite3
        ```

### 注意事项：
- 在 Windows 上，你也可以考虑使用预编译的 SQLite Shell，它包含 SQLite 的命令行工具和交互界面。
- 在 Linux 上，具体的包管理器和命令可能会根据你使用的发行版而有所不同。


## sqlite 命令行
- .database 列出已有数据库的基本信息。
- .open 创建数据库文件，可以指定路径。
- .quit 退出sqlite提示符。

## 系统表

### sqlite_master

sqlite_master表是SQLite的系统表。该表记录该数据库中保存的表、索引、视图、和触发器信息。每一行记录一个项目。在创建一个SQLIte数据库的时候，该表会自动创建。sqlite_master表包含5列。

- type列记录了项目的类型，如table、index、view、trigger。

- name列记录了项目的名称，如表名、索引名等。

- tbl_name列记录所从属的表名，如索引所在的表名。对于表来说，该列就是表名本身。

- rootpage列记录项目在数据库页中存储的编号。对于视图和触发器，该列值为0或者NULL。

- sql列记录创建该项目的SQL语句。

由于sqlite_master表存储所有的数据库项目，所以可以通过该表判断特定的表、视图或者索引是否存在。例如，以下语句可以判断user表是否存在。

select count(*) from sqlite_master where name='user' and type='table'


## 常用函数

- sqlite_version() 查询版本
- 